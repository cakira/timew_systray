# Timewarrior Systray Integration

## Overview
This project provides a system tray integration for [Timewarrior](https://timewarrior.net/), allowing users to visualize the current tracking status through a Windows system tray icon.

## Features
- **Automatic Tag Monitoring:** Captures the current tracking tags from Timewarrior.
- **Windows Systray Icon:** Displays an icon in the Windows system tray to indicate Timewarrior activity.
- **Cross-Platform Compatibility:** Uses a Bash script on WSL to extract tracking tags and a Python script on Windows to manage the systray icon.

## Project Structure
```
.
├── LICENSE
├── icons
│   ├── timewarrior.ico
│   └── timewarrior_empty.ico
├── timew_systray.py
└── wrapper_script
    └── timew
```

## Components
### 1. **Bash Wrapper Script (WSL/Linux)**
This script acts as a wrapper for Timewarrior, extracting tracking tags and saving them in a file accessible from Windows.

#### **Script Path:** `wrapper_script/timew`
#### **Functionality:**
- Runs the original Timewarrior command.
- Extracts the currently tracked tags.
- Saves the tags to a file in the Windows filesystem.
- Should be copied to `~/.local/bin/`.

#### **Example Script:**
```bash
#!/usr/bin/bash

# 14/Fev/2025
# Wrapper for Timewarrior to export tracking tags to Windows.

timew_original_prog=/usr/local/bin/timew
timew_tags_file=/mnt/c/Users/cakira/.local/state/timewarrior/current_tags.txt

$timew_original_prog "$@"
$timew_original_prog | grep '^Tracking' | cut -d ' ' -f 2- > $timew_tags_file
```

### 2. **Python Systray Application (Windows)**
A Python script that reads the tag file and updates a Windows system tray icon accordingly.

#### **Script Path:** `timew_systray.py`
#### **Functionality:**
- Monitors the `current_tags.txt` file for updates.
- Updates the systray icon based on tracking status.
- Runs as a background process.

#### **Dependencies:**
- `infi.systray` (Install using `pip install infi.systray`)

#### **Example Usage:**
```sh
python timew_systray.py
```

### 3. **Icons**
Icons used to visually indicate Timewarrior status in the Windows system tray.

#### **Icon Path:** `icons/`
- `timewarrior.ico`: Default Timewarrior icon.
- `timewarrior_empty.ico`: Icon used when no task is being tracked.
- `pre-vendas.ico`: Custom icon for pre-sales activities.

## Installation & Setup
### **1. Setup on WSL/Linux**
- Ensure Timewarrior is installed (`sudo apt install timewarrior`).
- Copy `wrapper_script/timew` into `~/.local/bin/`.
- Make it executable: `chmod +x ~/.local/bin/timew`.
- Ensure `~/.local/bin/` is in your `PATH`.

### **2. Setup on Windows**
- Install Python 3.x.
- Install dependencies: `pip install infi.systray`.
- Place `timew_systray.py` in a convenient location.
- Run `python timew_systray.py` to start the systray icon.

## Notes
- The wrapper script is required because Timewarrior currently lacks built-in hooks.
- The Python script runs indefinitely in the background. Close it via the system tray or Task Manager.
- Ensure WSL has permission to write to the Windows filesystem.

## License
This project is licensed under the MIT License.

## Author
Cleber Akira Nakandakare

## Disclaimer
This README file was generated by ChatGPT and has not yet been reviewed.
